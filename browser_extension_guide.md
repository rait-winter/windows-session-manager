# 浏览器扩展安装指南

本指南将帮助您安装和配置浏览器扩展，以便与Windows会话管理器的混合标签页采集功能配合使用。

## 为什么需要浏览器扩展？

Windows会话管理器使用两种方法来采集浏览器标签页：

1. **静态文件提取**：从浏览器的会话文件中提取标签页信息，不需要安装扩展，但信息可能不完整或不实时。
2. **WebSocket实时数据**：通过浏览器扩展实时发送标签页数据，提供最准确和最新的标签页信息。

安装浏览器扩展可以提供更好的体验，但这是可选的。如果不安装扩展，会话管理器将自动回退到静态文件提取方法。

## 支持的浏览器

目前支持以下浏览器：

- Google Chrome
- Microsoft Edge
- Firefox（即将支持）
- Brave（基于Chromium）
- Opera（基于Chromium）

## 安装步骤

### Chrome/Edge/Brave/Opera（基于Chromium的浏览器）

1. **下载扩展文件**
   - 从会话管理器安装目录的 `browser_extension` 文件夹中找到扩展文件。

2. **安装扩展**
   - 打开浏览器，进入扩展管理页面：
     - Chrome: 在地址栏输入 `chrome://extensions/`
     - Edge: 在地址栏输入 `edge://extensions/`
     - Brave: 在地址栏输入 `brave://extensions/`
     - Opera: 在地址栏输入 `opera://extensions/`
   
   - 启用"开发者模式"（通常在页面右上角或右侧）
   - 点击"加载已解压的扩展程序"按钮
   - 选择 `browser_extension` 文件夹
   - 扩展应该会出现在您的扩展列表中

3. **配置扩展**
   - 点击扩展图标（通常在浏览器右上角）
   - 输入WebSocket服务器地址（默认为 `ws://127.0.0.1:8765`）
   - 点击"连接"按钮

### Firefox（即将支持）

Firefox扩展正在开发中，将在未来版本中提供。

## 验证安装

安装完成后，您可以通过以下步骤验证扩展是否正常工作：

1. 确保WebSocket服务器已启动：
   - 运行 `start_tabs_server.bat` 脚本，或者
   - 在会话管理器中启用WebSocket服务器

2. 点击扩展图标，查看连接状态：
   - 绿色图标表示已连接
   - 红色图标表示未连接

3. 运行测试：
   - 运行 `test_websocket_client.py` 脚本，检查是否能接收到标签页数据

## 故障排除

如果扩展无法连接到WebSocket服务器，请检查以下几点：

1. **确保WebSocket服务器已启动**
   - 运行 `test_server_status.py` 检查服务器状态

2. **检查端口是否被占用**
   - 默认端口为8765，如果被占用，可以在启动服务器时指定其他端口：
   - `python start_tabs_server.py --port 8766`

3. **检查防火墙设置**
   - 确保防火墙允许本地WebSocket连接

4. **重启浏览器**
   - 有时候重启浏览器可以解决连接问题

5. **检查扩展设置**
   - 确保WebSocket服务器地址正确

## 隐私说明

该扩展只会收集浏览器标签页的基本信息（URL、标题等），并且只发送到本地WebSocket服务器，不会发送到互联网上的任何服务器。所有数据都保存在您的计算机上，不会被共享给第三方。

## 手动模式

如果您不想安装浏览器扩展，会话管理器将自动使用静态文件提取方法。这种方法可能不如扩展提供的实时数据准确，但对于大多数用例来说已经足够了。 