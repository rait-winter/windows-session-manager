# Windows会话管理器浏览器扩展指南

为了提高浏览器标签页采集的准确性和实时性，Windows会话管理器现在支持通过浏览器扩展获取标签页数据。本指南将帮助您安装和配置浏览器扩展。

## 一、为什么需要浏览器扩展？

浏览器扩展可以提供以下优势：

1. **实时数据**：当标签页发生变化时，立即获取最新数据
2. **准确性高**：直接从浏览器API获取数据，避免了解析浏览器文件的不确定性
3. **更多信息**：可获取更多标签页信息，如favicon、加载状态等
4. **跨平台支持**：适用于Windows、macOS和Linux等多种操作系统

即使不安装浏览器扩展，Windows会话管理器仍然可以通过静态提取方法获取标签页数据，但可能不如扩展方法准确。

## 二、安装浏览器扩展

### 1. 获取扩展文件

浏览器扩展位于项目的`websocket_tabs_poc/browser_extension`目录中。您需要将此目录复制到一个方便的位置。

### 2. 在Chrome/Edge中安装

1. 打开Chrome或Edge浏览器
2. 访问`chrome://extensions`（Chrome）或`edge://extensions`（Edge）
3. 在右上角启用"开发者模式"
4. 点击"加载已解压的扩展程序"按钮
5. 选择`browser_extension`目录
6. 扩展应该会出现在扩展列表中，图标会显示在浏览器工具栏上

### 3. 在Firefox中安装

1. 打开Firefox浏览器
2. 访问`about:debugging#/runtime/this-firefox`
3. 点击"临时载入附加组件"按钮
4. 选择`browser_extension/manifest.json`文件
5. 扩展应该会出现在扩展列表中，图标会显示在浏览器工具栏上

注意：在Firefox中，扩展是临时安装的，关闭浏览器后需要重新安装。

## 三、配置浏览器扩展

1. 点击浏览器工具栏中的扩展图标，打开扩展弹出窗口
2. 确保WebSocket服务器地址正确（默认为`ws://127.0.0.1:8765`）
3. 启用"启用监控"开关
4. 点击"保存设置"按钮
5. 如果连接成功，"连接状态"应显示为"已连接"

## 四、配置Windows会话管理器

Windows会话管理器默认启用混合标签页采集方法，无需额外配置。但如果您想调整WebSocket服务器设置，可以在配置文件中添加以下内容：

```json
{
  "websocket": {
    "enabled": true,
    "host": "127.0.0.1",
    "port": 8765,
    "auto_start": true
  }
}
```

参数说明：
- `enabled`：是否启用WebSocket服务器
- `host`：WebSocket服务器主机地址
- `port`：WebSocket服务器端口
- `auto_start`：是否在启动会话管理器时自动启动WebSocket服务器

## 五、故障排除

### 连接问题

如果浏览器扩展无法连接到WebSocket服务器：

1. 确保Windows会话管理器正在运行
2. 检查WebSocket服务器地址和端口是否正确
3. 检查防火墙设置，确保允许本地WebSocket连接
4. 重启浏览器和Windows会话管理器

### 标签页数据不准确

如果标签页数据不准确或不完整：

1. 确保扩展已启用监控功能
2. 检查扩展是否有必要的权限
3. 尝试重新连接WebSocket服务器
4. 如果问题持续存在，可能需要回退到静态提取方法

## 六、隐私说明

浏览器扩展仅收集标签页的URL、标题和状态信息，不会收集浏览历史、表单数据、密码等敏感信息。所有数据仅在本地传输和存储，不会发送到任何外部服务器。

## 七、开发者信息

如果您想修改或定制浏览器扩展：

1. 扩展源代码位于`websocket_tabs_poc/browser_extension`目录
2. 修改后，按照上述安装步骤重新加载扩展
3. 查看浏览器控制台以获取调试信息